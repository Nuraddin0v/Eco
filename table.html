<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>O'zbekiston Ekologik Partiyasi</title>
    <meta name="title" content="O'zbekiston Ekologik Partiyasi" />
    <meta name="description" content="O'zbekiston Ekologik Partiyasiga a'zolik sayti." />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://azolik.ecouz.uz/" />
    <meta property="og:title" content="O'zbekiston Ekologik Partiyasi" />
    <meta property="og:description" content="O'zbekiston Ekologik Partiyasiga a'zolik sayti." />
    <meta property="og:image" content="/img/uzb.png" />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://azolik.ecouz.uz/" />
    <meta property="twitter:title" content="O'zbekiston Ekologik Partiyasi" />
    <meta
      property="twitter:description"
      content="O'zbekiston Ekologik Partiyasiga a'zolik sayti."
    />
    <meta property="twitter:image" content="/img/uzb.png" />
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              colorgray: "#F2F2F2",
              btnbackcolor: "#007BFF",
              btncolor: "#FFFBFF",
              colorback: "#3298DA",
              bggreen: "#52c306",
              bgGrey: "#202020",
            },
            fontSize: {
              title: "clamp(1.75rem, 1.7419rem + 1.2903vw, 2.5rem)",
              paragraph: "clamp(0.875rem, 0.81rem + 0.3252vw, 1.125rem)",
            },
          },
        },
      };
    </script>
    <style>
      .close {
        right: -300px;
        display: none;
      }

      .open {
        right: 0;
      }

      .pagination ul {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
      }

      .pagination ul li {
        color: #27ae60;
        list-style: none;
        line-height: 45px;
        text-align: center;
        font-size: 18px;
        font-weight: 500;
        cursor: pointer;
        user-select: none;
        transition: all 0.3s ease;
        border: 1px solid #ddd;
        margin: 0 4px;
      }

      .pagination ul li.numb {
        list-style: none;
        height: 45px;
        width: 45px;
        margin: 0 3px;
        line-height: 45px;
      }

      .pagination ul li.numb.first {
        margin: 0px 4px;
      }

      .pagination ul li.numb.last {
        margin: 0 4px;
      }

      .pagination ul li.dots {
        font-size: 22px;
        cursor: default;
        height: 45px;
        width: 45px;
        line-height: 45px;
      }

      .pagination ul li.btn {
        padding: 0 20px;
        height: 45px;
        width: 45px;
      }

      .pagination li.active,
      .pagination ul li.numb:hover,
      .pagination ul li:first-child:hover,
      .pagination ul li:last-child:hover {
        color: #fff;
        background: #27ae60;
      }

      .right-btn,
      .left-btn {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .prev,
      .next {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .left-btn i,
      .right-btn i {
        font-size: 20px;
      }
    </style>
  </head>

  <body>
    <nav class="bg-bggreen text-white w-full overflow-hidden">
      <div class="container mx-auto flex justify-between">
        <div class="px-5 xl:px-12 py-2 flex w-full justify-between items-center">
          <a class="text-3xl font-bold font-heading" href="#">
            <img class="h-12" src="/img/logo.png" alt="logo" />
          </a>
          <!-- Nav Links -->
          <ul class="hidden md:flex px-2 font-semibold font-heading gap-4">
            <li>
              <a class="hover:text-gray-200 py-2 px-2" href="https://ecouz.uz/">Bosh sahifa</a>
            </li>
            <li><a class="hover:text-gray-200 py-2 px-2" href="#">A'zo bo'lish</a></li>
            <li><a class="hover:text-gray-200 py-2 px-2" href="#">Obunalar tarixi</a></li>
          </ul>
        </div>

        <button class="navbar-burger self-center mr-8 md:hidden" type="button" id="openMobileMenu">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 hover:text-gray-200"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
      </div>
      <div
        class="absolute z-10 top-0 close bottom-0 w-[250px] bg-bgGrey transition-all duration-200 delay-200"
        id="mobileMenu"
      >
        <button type="button" id="closeButton" class="px-4 py-2 absolute right-0">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-7 h-7 font-bold"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <ul class="flex flex-col px-5 font-semibold font-heading gap-4 mt-10">
          <li>
            <a class="hover:text-gray-200 py-2 px-2" href="https://ecouz.uz/">Bosh sahifa</a>
          </li>
          <li><a class="hover:text-gray-200 py-2 px-2" href="#">A'zo bo'lish</a></li>
          <li><a class="hover:text-gray-200 py-2 px-2" href="#">Obunalar tarixi</a></li>
        </ul>
      </div>
    </nav>
    <section id="boxes2" class="container mx-auto px-5 py-3">
      <h2 class="text-2xl font-semibold pl-5 pt-3">Obunalar tarixi</h2>
      <div class="py-2 overflow-x-auto px-2">
        <h3 class="text-center text-xl mt-5 font-medium">Obunalar mavjud emas</h3>
        <div class="align-middle inline-block min-w-full overflow-hidden bg-white pt-3 pb-3">
          <table class="min-w-full">
            <thead>
              <tr>
                <th
                  class="px-6 py-3 border-b-2 border-gray-300 text-left leading-4 text-blue-500 tracking-wider"
                >
                  To'lov ID
                </th>
                <th
                  class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider"
                >
                  To'lov oyi
                </th>
                <th
                  class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider"
                >
                  To'lov turi
                </th>
                <th
                  class="px-6 py-3 border-b-2 border-gray-300 text-left text-sm leading-4 text-blue-500 tracking-wider"
                >
                  To'lov vaqti
                </th>
              </tr>
            </thead>
            <tbody class="bg-white" id="tableBody"></tbody>
          </table>
          <div class="pagination mt-5">
            <ul class="justify-end"></ul>
          </div>
        </div>
      </div>
    </section>
    <script>
      const closeButton = document.querySelector("#closeButton");
      const openMobileMenu = document.querySelector("#openMobileMenu");
      const mobileMenu = document.querySelector("#mobileMenu");
      const viloyat = document.getElementById("viloyat");
      const tuman = document.getElementById("tuman");
      closeButton.addEventListener("click", () => {
        mobileMenu.classList.remove("open");
        mobileMenu.classList.add("close");
      });
      openMobileMenu.addEventListener("click", () => {
        mobileMenu.classList.remove("close");
        mobileMenu.classList.add("open");
      });

      let totalPages = 5;
      let currentPage = 1;

      const element = document.querySelector(".pagination ul");

      const fetchData = async (page, size) => {
        let table = document.getElementById("tableBody");
        table.innerHTML = null;
        await fetch(`URL?page=${page}&size=${size}`, {
          method: "get",
          // headers: new Headers({
          //   Authorization: token,
          // }),
        })
          .then(response => response.json())
          .then(json => {
            const data = json?.data;
            totalPages = Math.ceil(new Number(json.page.totalPages) / 10);
            currentPage = json.page.currentPage + 1;
            createPagination1(currentPage, false);
            data.forEach((item, key) => {
              const row = table.insertRow();
              const orderID = row.insertCell();
              const orderIDtext = document.createTextNode(item?.orderId);
              orderID.appendChild(orderIDtext);
              orderID.setAttribute(
                "class",
                "px-6 py-4 whitespace-no-wrap border-b text-blue-900 border-gray-500 text-sm leading-5"
              );
              const tolovOyi = row.insertCell();
              const tolovOyiText = document.createTextNode(item?.tolovOyi);
              tolovOyi.appendChild(tolovOyiText);
              tolovOyi.setAttribute(
                "class",
                "px-6 py-4 whitespace-no-wrap border-b text-blue-900 border-gray-500 text-sm leading-5"
              );
              const tolovTuri = row.insertCell();
              const tolovTuriText = document.createTextNode(item?.tolovTuri);
              tolovTuri.appendChild(tolovTuriText);
              tolovTuri.setAttribute(
                "class",
                "px-6 py-4 whitespace-no-wrap border-b text-blue-900 border-gray-500 text-sm leading-5"
              );
              const tolovVaqti = row.insertCell();
              const tolovVaqtiText = document.createTextNode(item?.tolovVaqti);
              tolovVaqti.appendChild(tolovVaqtiText);
              tolovVaqti.setAttribute(
                "class",
                "px-6 py-4 whitespace-no-wrap border-b text-blue-900 border-gray-500 text-sm leading-5"
              );
            });
          });
      };

      createPagination1(1, false);

      function createPagination1(page, isCall = true) {
        isCall && fetchData(page - 1, 10);
        let liTag = "";
        let active;
        let beforePage = page - 1;
        let afterPage = page + 1;
        if (page > 1) {
          liTag += `<li class="btn prev" onclick="createPagination1(${
            page - 1
          })"><span class="left-btn"><i class='bx bxs-chevron-left icon' ></i></span></li>`;
        }

        if (totalPages !== 5 || totalPages !== 4) {
          if (page > 2) {
            liTag += `<li class="first numb" onclick="createPagination1(1)"><span>1</span></li>`;
            if (page > 3 && totalPages !== 5 && totalPages !== 4) {
              liTag += `<li class="dots"><span>...</span></li>`;
            }
          }
        } else {
          if (page > 2) {
            liTag += `<li class="first numb" onclick="createPagination1(1)"><span>1</span></li>`;
          }
        }

        if (totalPages === 5) {
          if (page == totalPages) {
            beforePage = beforePage - 2;
          } else if (page == totalPages - 1) {
            beforePage = beforePage - 1;
          }
        } else {
          if (page == totalPages && totalPages !== 1 && totalPages !== 2 && totalPages !== 3) {
            beforePage = beforePage - 1;
          } else if (page == totalPages - 1 && totalPages !== 2 && totalPages !== 4) {
            beforePage = beforePage - 1;
          }
        }

        if (totalPages === 5) {
          if (page == 1) {
            afterPage = afterPage + 2;
          } else if (page == 2) {
            afterPage = afterPage + 1;
          }
        } else if (totalPages === 4) {
          if (page == 1) {
            afterPage = afterPage + 1;
          }
        } else {
          if (page == 1) {
            // afterPage = afterPage + 2;
          } else if (page == 2) {
            afterPage = afterPage + 1;
          }
        }

        for (var plength = beforePage; plength <= afterPage; plength++) {
          if (plength > totalPages) {
            continue;
          }
          if (plength == 0) {
            plength = plength + 1;
          }
          if (page == plength) {
            active = "active";
          } else {
            active = "";
          }
          liTag += `<li class="numb ${active}" onclick="createPagination1(${plength})"><span>${plength}</span></li>`;
        }

        if (totalPages !== 5 || totalPages !== 4 || totalPages !== 3 || totalPages !== 2) {
          if (page < totalPages - 1) {
            if (page < totalPages - 2 && totalPages !== 5 && totalPages !== 4) {
              liTag += `<li class="dots"><span>...</span></li>`;
            }
            liTag += `<li class="last numb lastPaginationButton" onclick="createPagination1(${totalPages})" id=${totalPages}><span>${totalPages}</span></li>`;
          }
        }

        if (page < totalPages) {
          liTag += `<li class="btn next" onclick="createPagination1(${
            page + 1
          })"><span class="right-btn"><i class='bx bxs-chevron-right menu-icon'></i></span></li>`;
        }
        element.innerHTML = liTag;
        return liTag;
      }
      fetchData(0, 10);
    </script>
  </body>
</html>
